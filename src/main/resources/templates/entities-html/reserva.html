<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="es">-->
<!--<head th:replace="fragments/head :: head ('Reservas - BnBillains')"></head>-->
<!--<body class="d-flex flex-column h-100" style="background-color: #f8f9fa;">-->

<!--<header th:replace="fragments/header :: header"></header>-->

<!--<main class="flex-shrink-0" style="margin-top: 10%; padding: 2rem;">-->
<!--    <div class="container">-->
<!--        <div class="d-flex justify-content-between align-items-center mb-4">-->
<!--            <h1 class="mb-0">Gesti√≥n de Reservas</h1>-->
<!--            <a href="/reserva/new" class="btn btn-info">+ Nueva Reserva</a>-->
<!--        </div>-->

<!--        <div class="table-responsive">-->
<!--            <table class="table table-striped table-hover">-->
<!--                <thead class="table-dark">-->
<!--                <tr>-->
<!--                    <th>ID</th>-->
<!--                    <th>Villano</th>-->
<!--                    <th>Guarida</th>-->
<!--                    <th>Fecha Inicio</th>-->
<!--                    <th>Fecha Fin</th>-->
<!--                    <th>Coste Total</th>-->
<!--                    <th>Estado</th>-->
<!--                    <th>Acciones</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody>-->
<!--                <tr th:if="${reservas.isEmpty()}">-->
<!--                    <td colspan="8" class="text-center text-muted">No hay reservas registradas</td>-->
<!--                </tr>-->
<!--                <tr th:each="reserva : ${reservas}">-->
<!--                    <td th:text="${reserva.id}"></td>-->
<!--                    <td th:text="${reserva.villano != null ? reserva.villano.nombre : 'N/A'}"></td>-->
<!--                    <td th:text="${reserva.guarida != null ? reserva.guarida.nombre : 'N/A'}"></td>-->
<!--                    <td th:text="${reserva.fechaInicio}"></td>-->
<!--                    <td th:text="${reserva.fechaFin}"></td>-->
<!--                    <td th:text="${reserva.costeTotal}"></td>-->
<!--                    <td>-->
<!--                        <span th:if="${reserva.estado}" class="badge bg-success">Confirmada</span>-->
<!--                        <span th:unless="${reserva.estado}" class="badge bg-warning">Pendiente</span>-->
<!--                    </td>-->
<!--                    <td>-->
<!--                        <a th:href="@{/reserva/{id}/edit(id=${reserva.id})}" class="btn btn-sm btn-warning">Editar</a>-->
<!--                        <a th:href="@{/reserva/{id}/delete(id=${reserva.id})}" class="btn btn-sm btn-danger"-->
<!--                           onclick="return confirm('¬øEliminar esta reserva?');">Eliminar</a>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                </tbody>-->
<!--            </table>-->
<!--        </div>-->
<!--    </div>-->
<!--</main>-->

<!--<footer th:replace="fragments/footer :: footer"></footer>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{fragments/head :: head ('Reservas - BnBillains')}"></head>
<body class="d-flex flex-column h-100 bg-light">
<header th:replace="~{fragments/header :: header}"></header>

<main class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üìÖ Libro de Reservas</h2>
        <a th:href="@{/reservas/new}" class="btn btn-success">+ Nueva Reserva</a>
    </div>

    <form th:action="@{/reservas}" method="get" class="row g-2 mb-4 p-3 bg-white border rounded">
        <div class="col-md-4">
            <select name="villanoId" class="form-select">
                <option value="">-- Filtrar por Cliente --</option>
                <option th:each="v : ${allVillanos}" th:value="${v.id}" th:text="${v.alias}"
                        th:selected="${v.id == villanoId}"></option>
            </select>
        </div>
        <div class="col-md-3">
            <select name="estado" class="form-select">
                <option value="">-- Estado --</option>
                <option value="true" th:selected="${estado == true}">Confirmada</option>
                <option value="false" th:selected="${estado == false}">Pendiente</option>
            </select>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Filtrar</button>
        </div>
    </form>

    <div class="table-responsive bg-white shadow-sm rounded">
        <table class="table table-hover mb-0">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th><a class="text-white" th:href="@{/reservas(sort='dateDesc')}">Fechas ‚Üï</a></th>
                <th>Villano</th>
                <th>Guarida</th>
                <th><a class="text-white" th:href="@{/reservas(sort='costDesc')}">Coste ‚Üï</a></th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="r : ${reservas}">
                <td th:text="${r.id}"></td>
                <td>
                    <span class="fw-bold" th:text="${r.fechaInicio}"></span> <br>
                    <span class="text-muted small" th:text="${r.fechaFin}"></span>
                </td>
                <td>
                    <a th:href="@{/villano/{id}(id=${r.villano.id})}" th:text="${r.villano.alias}">Joker</a>
                </td>
                <td th:text="${r.guarida.nombre}">Volc√°n</td>
                <td class="text-end" th:text="${r.costeTotal} + ' ‚Ç¨'">1000‚Ç¨</td>
                <td>
                    <span th:if="${r.estado}" class="badge bg-success">Confirmada</span>
                    <span th:unless="${r.estado}" class="badge bg-warning text-dark">Pendiente</span>
                </td>
                <td>
                    <a th:href="@{/reservas/{id}/edit(id=${r.id})}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                    <a th:href="@{/reservas/delete/{id}(id=${r.id})}" class="btn btn-sm btn-danger" onclick="return confirm('¬øCancelar reserva?');">‚ùå</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>
