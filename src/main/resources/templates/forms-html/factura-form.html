<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{fragments/head :: head (#{msg.factura.edit} + ' - BnBillains')}"></head>
<body class="d-flex flex-column h-100">

<header th:replace="~{fragments/header :: header}"></header>

<main class="flex-shrink-0 flex-grow-1 container" style="margin-top: 100px; margin-bottom: 50px;">

    <div class="card shadow col-lg-8 mx-auto border-secondary">
        <div class="card-header text-center">
            <h2 class="mb-0 display-6">
                <span th:text="#{msg.factura.edit}">Editar Factura</span> #<span th:text="${factura.id}">000</span>
            </h2>
        </div>

        <div class="card-body p-4">

            <form th:action="@{/facturas/update}" th:object="${factura}" method="post">
                <input type="hidden" th:field="*{id}">

                <div class="d-flex align-items-center p-3 mb-4 rounded border"
                     th:if="${factura.reserva != null}"
                     style="background-color: rgba(46, 0, 62, 0.3); border-color: var(--color-logo-light) !important;">
                    <span class="fs-2 me-3"></span>
                    <div>
                        <div class="small text-uppercase text-white fw-bold" th:text="#{msg.factura.linkedReservation}">
                            Reserva Vinculada
                        </div>
                        <div class="text-white">
                            <strong th:text="${factura.reserva.guarida.nombre}">Guarida</strong>
                            <span class="mx-2 text-white">|</span>
                            <span class="fst-italic" th:text="${factura.reserva.villano.alias}">Villano</span>
                        </div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label text-white small text-uppercase fw-bold"
                               th:text="#{msg.factura.date}">Fecha Emisión</label>
                        <input type="date" class="form-control" th:field="*{fechaEmision}" readonly
                               style="background-color: #0f0f10; border-color: #333; opacity: 0.7; cursor: not-allowed;">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label text-white small text-uppercase fw-bold"
                               th:text="#{msg.factura.import} + ' (€)'">Importe Base (€)</label>
                        <input type="number" step="0.01" class="form-control" th:field="*{importe}" readonly
                               style="background-color: #0f0f10; border-color: #333; opacity: 0.7; cursor: not-allowed;">
                    </div>
                </div>

                <div class="mb-4">
                    <label class="form-label text-white small text-uppercase fw-bold"
                           th:text="#{msg.factura.taxes} + ' (21%)'">Impuestos Malignos (21%)</label>
                    <input type="number" step="0.01" class="form-control" th:field="*{impuestosMalignos}" readonly
                           style="background-color: #0f0f10; border-color: #333; opacity: 0.7; cursor: not-allowed;">
                </div>

                <hr style="border-color: var(--color-logo-light); opacity: 0.3;">

                <div class="mb-4">
                    <label class="form-label fw-bold text-warning">
                        <i class="bi bi-wallet2"></i> <span th:text="#{msg.factura.metod}">Método de Pago</span>
                    </label>
                    <select class="form-select" th:field="*{metodoPago}"
                            style="border: 1px solid var(--color-logo-light);">
                        <option value="Pendiente" th:text="#{msg.payment.pending}">Pendiente de cobro</option>
                        <option value="Transferencia" th:text="#{msg.payment.transfer}">Transferencia Bancaria</option>
                        <option value="Bitcoin" th:text="#{msg.payment.bitcoin}">Bitcoin</option>
                        <option value="Oro" th:text="#{msg.payment.gold}">Lingotes de Oro</option>
                        <option value="Efectivo" th:text="#{msg.payment.cash}">Efectivo</option>
                    </select>
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a th:href="@{/facturas}" class="btn btn-outline-light me-md-2" th:text="#{msg.guaridaForm.cancel}">Cancelar</a>
                    <button type="submit" class="btn btn-primary px-4 shadow" th:text="#{msg.comodidad.btn.update}">
                        Guardar Cambios
                    </button>
                </div>
            </form>
        </div>
    </div>
</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>